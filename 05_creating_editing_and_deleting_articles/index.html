
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A tutorial for building the RealWorld app in Django and HTMX">
      
      
      
      <link rel="icon" href="../assets/django-logo.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.6">
    
    
      
        <title>Creating, editing, and deleting Articles - Django + HTMX tutorial</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4a0965b7.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
    <script data-goatcounter="https://django-htmx.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>

    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creating-editing-and-deleting-articles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Django + HTMX tutorial" class="md-header__button md-logo" aria-label="Django + HTMX tutorial" data-md-component="logo">
      
  <img src="../assets/django-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Django + HTMX tutorial
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creating, editing, and deleting Articles
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/harabat/django-htmx" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  </div>
  <div class="md-source__repository">
    harabat/django-htmx
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Django + HTMX tutorial" class="md-nav__button md-logo" aria-label="Django + HTMX tutorial" data-md-component="logo">
      
  <img src="../assets/django-logo.png" alt="logo">

    </a>
    Django + HTMX tutorial
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/harabat/django-htmx" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  </div>
  <div class="md-source__repository">
    harabat/django-htmx
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Readme
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../01_starting_the_project/" class="md-nav__link">
        Starting the project
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../02_home_page/" class="md-nav__link">
        Home page
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../03_viewing_articles/" class="md-nav__link">
        Viewing Articles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../04_slugs/" class="md-nav__link">
        Slugs
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Creating, editing, and deleting Articles
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Creating, editing, and deleting Articles
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-articles" class="md-nav__link">
    Creating Articles
  </a>
  
    <nav class="md-nav" aria-label="Creating Articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subclass-a-createview" class="md-nav__link">
    Subclass a CreateView
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-urlpattern" class="md-nav__link">
    Add a urlpattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-form" class="md-nav__link">
    Create a form
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-navbar-button" class="md-nav__link">
    Add a navbar button
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-form_valid" class="md-nav__link">
    Override form_valid
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#editing-articles" class="md-nav__link">
    Editing Articles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-articles" class="md-nav__link">
    Deleting Articles
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../06_comments/" class="md-nav__link">
        Comments
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../07_users_and_profiles/" class="md-nav__link">
        Users and Profiles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../08_authentication_i_login_logout_signup/" class="md-nav__link">
        Login, Logout, Signup
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../09_authentication_ii_securing_the_app/" class="md-nav__link">
        Securing the app
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../10_profile_features/" class="md-nav__link">
        Profile features
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../11_editing_profiles/" class="md-nav__link">
        Editing profiles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../12_follows/" class="md-nav__link">
        Follows
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../13_favourites/" class="md-nav__link">
        Favourites
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../14_tags_coming_soon/" class="md-nav__link">
        Tags
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../15_htmx_coming_soon/" class="md-nav__link">
        HTMX
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../16_future_extensions/" class="md-nav__link">
        Future extensions
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-articles" class="md-nav__link">
    Creating Articles
  </a>
  
    <nav class="md-nav" aria-label="Creating Articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subclass-a-createview" class="md-nav__link">
    Subclass a CreateView
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-urlpattern" class="md-nav__link">
    Add a urlpattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-form" class="md-nav__link">
    Create a form
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-navbar-button" class="md-nav__link">
    Add a navbar button
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-form_valid" class="md-nav__link">
    Override form_valid
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#editing-articles" class="md-nav__link">
    Editing Articles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-articles" class="md-nav__link">
    Deleting Articles
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/harabat/django-htmx/edit/master/docs/05_creating_editing_and_deleting_articles.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="creating-editing-and-deleting-articles">Creating, editing, and deleting Articles<a class="headerlink" href="#creating-editing-and-deleting-articles" title="Permanent link">#</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">#</a></h2>
<p>We have implemented the features that allow us to view articles, but up
to now we've been modifying them through the Django admin. We need to
let our users create, edit, and delete articles.</p>
<p>Technically, these functionalities should only be available to logged-in
users, but that's not something we can work on just yet, so we will go
ahead and implement the article features, and modify them later in order
to take into account user authentication.</p>
<h2 id="creating-articles">Creating Articles<a class="headerlink" href="#creating-articles" title="Permanent link">#</a></h2>
<p>Let's allow users to create articles. The most basic feature possible.</p>
<div class="admonition advice">
<p class="admonition-title">Advice</p>
<p>We remind you again that up to now we've mostly been keeping to what the</p>
</div>
<p><a href="https://github.com/DjangoGirls/tutorial">DjangoGirls tutorial</a>: if
you're having difficulties following, you should do that tutorial, as
its pace is a bit slower. Unless, of course, the fault is on my side of
the screen, in which case please provide feedback :).</p>
<h3 id="subclass-a-createview">Subclass a <code>CreateView</code><a class="headerlink" href="#subclass-a-createview" title="Permanent link">#</a></h3>
<p>Creating instances of a model is bound to be a common task, right?
Unsurprisingly, Django has a ready-made class-based view for that.</p>
<p>We subclass a <code>CreateView</code> in <code>articles/views.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">CreateView</span><span class="p">,</span> <span class="n">DetailView</span><span class="p">,</span> <span class="n">ListView</span>   <span class="c1"># new</span>
</span>
<span class="c1"># ...</span>

<span class="hll"><span class="k">class</span> <span class="nc">EditorCreateView</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>                                 <span class="c1"># new</span>
</span><span class="hll">    <span class="sd">&quot;&quot;&quot;View for creating articles.&quot;&quot;&quot;</span>                               <span class="c1">#</span>
</span><span class="hll">                                                                    <span class="c1">#</span>
</span><span class="hll">    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>                                                 <span class="c1">#</span>
</span><span class="hll">    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;body&#39;</span><span class="p">]</span>                       <span class="c1">#</span>
</span><span class="hll">    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;editor.html&quot;</span>                                   <span class="c1">#</span>
</span></code></pre></div></td></tr></table></div>
<p>The <a href="https://docs.djangoproject.com/en/4.0/ref/class-based-views/generic-editing/#createview"><code>CreateView</code> class-based
view</a>
is a generic editing view that “displays a form for creating an object,
redisplaying the form with validation errors (if there are any) and
saving the object”. What more could we want? Sometimes, using
class-based views (and Django in general) might feel like a cheat code,
but it's completely legal, don't worry.</p>
<p>In the code above, we specify the following:</p>
<ul>
<li>the model that we're creating new instances of</li>
<li>the template name</li>
<li>the fields we want to have available to the user when creating the
    form: specifically, we're leaving out the <code>author</code> field here.</li>
</ul>
<h3 id="add-a-urlpattern">Add a <code>urlpattern</code><a class="headerlink" href="#add-a-urlpattern" title="Permanent link">#</a></h3>
<p>We add the following to <code>articles/urls.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">ArticleDetailView</span><span class="p">,</span> <span class="n">EditorCreateView</span><span class="p">,</span> <span class="n">Home</span>            <span class="c1"># new</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;editor&quot;</span><span class="p">,</span> <span class="n">EditorCreateView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;editor_create&quot;</span><span class="p">),</span>   <span class="c1"># new</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Not much to explain here.</p>
<h3 id="create-a-form">Create a form<a class="headerlink" href="#create-a-form" title="Permanent link">#</a></h3>
<p>This section will have lots of new elements and information, so take a
break.</p>
<p>We need to create the template <code>templates/editor.html</code> (based on Svelte
implementation's
<a href="https://github.com/sveltejs/realworld/blob/master/src/routes/editor/_Editor.svelte">_Editor.svelte</a>
template):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code>{% extends &#39;base.html&#39; %}
{% block title %}
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Editor - Conduit: Django + HTMX<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
{% endblock %}
{% block content %}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;editor-page&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container page&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-10 offset-md-1 col-xs-12&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span><span class="p">&gt;</span>
            {% csrf_token %}
            {{ form.non_field_errors }}
            <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
              <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span>
                  <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control form-control-lg&quot;</span>
                  <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
                  <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Article Title&quot;</span>
                  <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span>
                <span class="p">/&gt;</span>
              <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
              {{ form.title.errors }}
              <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span>
                  <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span>
                  <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
                  <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;What&#39;s this article about?&quot;</span>
                  <span class="na">name</span><span class="o">=</span><span class="s">&quot;description&quot;</span>
                <span class="p">/&gt;</span>
              <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
              {{ form.description.errors }}
              <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">textarea</span>
                  <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span>
                  <span class="na">rows</span><span class="o">=</span><span class="s">&quot;8&quot;</span>
                  <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Write your article (in markdown)&quot;</span>
                  <span class="na">name</span><span class="o">=</span><span class="s">&#39;body&#39;</span>
                <span class="p">&gt;&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
              <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
              {{ form.body.errors }}
              <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-lg pull-xs-right btn-primary&quot;</span><span class="p">&gt;</span>
                Publish Article
              <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{% endblock %}
</code></pre></div></td></tr></table></div>
<p>There's a lot here: we've reached the point where we have to implement
forms, a major use case in web dev. While forms are one of Django's many
strong points, there is a lot of new material to understand.</p>
<p>The <a href="https://docs.djangoproject.com/en/4.0/topics/forms/">Django docs section that deals with
forms</a> says:</p>
<blockquote>
<p>Django handles three distinct parts of the work involved in forms:</p>
<ul>
<li>preparing and restructuring data to make it ready for rendering</li>
<li>creating HTML forms for the data</li>
<li>receiving and processing submitted forms and data from the client</li>
</ul>
</blockquote>
<ul>
<li><code>&lt;form method="post"&gt;</code><ul>
<li>Forms allow users to provide input to the website they're
    visiting, that the website can then process and act upon.</li>
<li>We want to modify data server-side (we will create new <code>Article</code>
    instances), so we need to make a POST form (which we do with
    <code>method="post"</code>).</li>
</ul>
</li>
<li><code>{% csrf_token %}</code><ul>
<li>POST forms need to mitigate against <a href="https://docs.djangoproject.com/en/4.0/ref/csrf/">Cross Site Request
    Forgeries</a>, a
    type of malicious attack, but Django makes this very easy: in
    our case, we only need to include the <code>{% csrf_token %}</code> tag
    inside the <code>&lt;form&gt;</code> element (though you might have to do a bit
    more work <a href="https://docs.djangoproject.com/en/4.0/howto/csrf/using-csrf">in other
    circumstances</a>).</li>
</ul>
</li>
<li><code>{{ form.non_field_errors }}</code><ul>
<li>The <code>{{ form.non_field_errors }}</code> variable will display any
    errors that are not field-specific, which is why this variable
    is outside of any fieldsets.</li>
</ul>
</li>
<li></li>
</ul>
<p>There are different ways to render a form: it depends on whether
<a href="https://docs.djangoproject.com/en/4.0/topics/forms/#form-rendering-options">Django's defaults unpacking of form
fields</a>
is sufficient, whether you need more <a href="https://docs.djangoproject.com/en/4.0/topics/forms/#rendering-fields-manually">flexibility in how you render the
fields</a>.
We want a lot of flexibility (we want the fields to be in a specific
order, to how distinct placeholder values).</p>
<h3 id="add-a-navbar-button">Add a navbar button<a class="headerlink" href="#add-a-navbar-button" title="Permanent link">#</a></h3>
<p>We add a <code>New article</code> button to the Nav bar in <code>templates/nav.html</code>
(still copying Svelte's <a href="https://github.com/sveltejs/realworld/blob/master/src/lib/Nav.svelte">Nav.svelte
template</a>):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cm">&lt;!-- ... --&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav navbar-nav pull-xs-right&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-item&quot;</span><span class="p">&gt;</span>
<span class="hll">    {% url &#39;home&#39; as home %}                                                        <span class="cm">&lt;!-- new --&gt;</span>
</span><span class="hll">    <span class="cm">&lt;!-- &lt;a href=&quot;{% url &#39;home&#39; %}&quot; rel=&quot;prefetch&quot; class=&quot;nav-link&quot;&gt; --&gt;</span>            <span class="cm">&lt;!-- from this --&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">a</span>                                                                              <span class="err">&lt;!</span><span class="na">--</span> <span class="na">to</span> <span class="na">this</span> <span class="na">--</span><span class="p">&gt;</span>
</span><span class="hll">      href=&quot;{{ home }}&quot;                                                             <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      rel=&quot;prefetch&quot;                                                                <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      class=&quot;nav-link {% if request.path == home %}active{% endif %}&quot;               <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    &gt;                                                                               <span class="cm">&lt;!-- # --&gt;</span>
</span>      Home
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-item&quot;</span><span class="p">&gt;</span>                                                             <span class="cm">&lt;!-- new --&gt;</span>
</span><span class="hll">    {% url &#39;editor_create&#39; as editor_create %}                                      <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">a</span>                                                                              <span class="err">&lt;!</span><span class="na">--</span> <span class="err">#</span> <span class="na">--</span><span class="p">&gt;</span>
</span><span class="hll">      href=&quot;{{ editor_create }}&quot;                                                    <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      rel=&quot;prefetch&quot;                                                                <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      class=&quot;nav-link {% if request.path == editor_create %}active{% endif %}&quot;      <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    &gt;                                                                               <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ion-compose&quot;</span><span class="p">&gt;</span> New Post <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>                                   <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>                                                                            <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>                                                                             <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>We added <code>{% url 'home' as home %}</code> and
<code>class "nav-link {% if request.path == home %}active{% endif %}"</code> to
better style active links.</p>
<h3 id="override-form_valid">Override <code>form_valid</code><a class="headerlink" href="#override-form_valid" title="Permanent link">#</a></h3>
<p>Try to create an article in your app. When you hit “Publish”, you'll get
an error:</p>
<blockquote>
<p>IntegrityError at /editor NOT NULL constraint failed:
articles_article.author_id</p>
</blockquote>
<p>That's because the form doesn't know who the author is, and author is a
required field in our model. Let's override the <code>EditorCreateView</code>
view's <code>form_valid</code> method in our <code>views.py</code> file: before we save the
form, we'll set the logged in user (<code>admin</code>, for now) as the <code>author</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EditorCreateView</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;create article&quot;&quot;&quot;</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">]</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;editor.html&quot;</span>

<span class="hll">    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>                         <span class="c1"># new</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>           <span class="c1">#</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">profile</span>  <span class="c1">#</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>                              <span class="c1">#</span>
</span><span class="hll">        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>                 <span class="c1">#</span>
</span></code></pre></div></td></tr></table></div>
<p>Once this is done, try creating another article: it should work.</p>
<h2 id="editing-articles">Editing Articles<a class="headerlink" href="#editing-articles" title="Permanent link">#</a></h2>
<p>We will now implement the editing feature.</p>
<p>In <code>views.py</code>, add the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="c1"># ...</span>
    <span class="n">UpdateView</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># ...</span>

<span class="k">class</span> <span class="nc">EditorUpdateView</span><span class="p">(</span><span class="n">UpdateView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;edit article&quot;&quot;&quot;</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">]</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;editor.html&quot;</span>
</code></pre></div></td></tr></table></div>
<p>We're using the same template for creating and editing articles. In
<code>urls.py</code>, add:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="c1"># ...</span>
    <span class="n">EditorUpdateView</span>
<span class="p">)</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;editor/&lt;slug:slug_uuid&gt;&quot;</span><span class="p">,</span> <span class="n">EditorUpdateView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;editor_update&quot;</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>In <code>article_detail.html</code>, we add a button for editing the article and
pass <code>article.slug_uuid</code> as an argument to the url (see <a href="https://docs.djangoproject.com/en/4.0/ref/templates/builtins/#url">the
documentation for <code>url</code>
tag</a>),
given that our URL expects a <code>slug_uuid</code> (<code>editor/&lt;slug:slug_uuid&gt;</code>).
The documentation for ):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;article-meta&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;info&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;author&quot;</span><span class="p">&gt;</span>
            {{ article.author }}
        <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;date&quot;</span><span class="p">&gt;</span>
            {{ article.created_at|date:&quot;F d, Y&quot; }}
        <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>                                                              <span class="cm">&lt;!-- new from here --&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">a</span>
</span><span class="hll">            <span class="na">href</span><span class="o">=</span><span class="s">&quot;{% url &#39;editor_update&#39; slug_uuid=article.slug_uuid %}&quot;</span>
</span><span class="hll">            <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-outline-secondary btn-sm&quot;</span>
</span><span class="hll">        <span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ion-edit&quot;</span><span class="p">&gt;</span>
</span><span class="hll">                Edit Article
</span><span class="hll">            <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>                                                             <span class="cm">&lt;!-- new to here --&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>In the <code>editor.html</code> template, we want to have the form fields
prepopulated with the relevant values. When using <code>UpdateView</code>, we have
access to the object being updated. Let's add the following to the
<code>editor.html</code> template:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span>
            <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control form-control-lg&quot;</span>
            <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
            <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Article Title&quot;</span>
            <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span>
<span class="hll">            <span class="na">value</span><span class="o">=</span><span class="s">&quot;{{ article.title|default_if_none:&#39;&#39; }}&quot;</span>          <span class="err">&lt;!</span><span class="na">--</span> <span class="na">new</span> <span class="na">--</span><span class="p">&gt;</span>
</span>        /&gt;
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span>
            <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span>
            <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
            <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;What&#39;s this article about?&quot;</span>
            <span class="na">name</span><span class="o">=</span><span class="s">&quot;description&quot;</span>
<span class="hll">            <span class="na">value</span><span class="o">=</span><span class="s">&quot;{{ article.description|default_if_none:&#39;&#39; }}&quot;</span>    <span class="err">&lt;!</span><span class="na">--</span> <span class="na">new</span> <span class="na">--</span><span class="p">&gt;</span>
</span>        /&gt;
    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">textarea</span>
            <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span>
            <span class="na">rows</span><span class="o">=</span><span class="s">&quot;8&quot;</span>
            <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Write your article (in markdown)&quot;</span>
            <span class="na">name</span><span class="o">=</span><span class="s">&quot;body&quot;</span>
<span class="hll">        <span class="p">/&gt;</span>{{ article.body|default_if_none:&#39;&#39; }}<span class="p">&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>          <span class="cm">&lt;!-- new --&gt;</span>
</span>    <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-lg pull-xs-right btn-primary&quot;</span><span class="p">&gt;</span>
        Publish Article
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Try editing an article: all the values should be prepopulated.</p>
<h2 id="deleting-articles">Deleting Articles<a class="headerlink" href="#deleting-articles" title="Permanent link">#</a></h2>
<p>In <code>views.py</code>, we create a <code>ArticleDeleteView</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="c1"># ...</span>
    <span class="n">DeleteView</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">reverse_lazy</span>

<span class="c1"># ...</span>
<span class="k">class</span> <span class="nc">EditorDeleteView</span><span class="p">(</span><span class="n">DeleteView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;delete article&quot;&quot;&quot;</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>
    <span class="n">success_url</span> <span class="o">=</span> <span class="n">reverse_lazy</span><span class="p">(</span><span class="s2">&quot;home&quot;</span><span class="p">)</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;article_detail.html&quot;</span>
</code></pre></div></td></tr></table></div>
<p>Notice that we're using the <code>article_detail.html</code> template. We could use
a separate one, but that would require to load a new page, which seems
unnecessary: we'll see in a second how we're making this work.</p>
<p>In <code>urls.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="c1"># ...</span>
    <span class="n">EditorDeleteView</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;editor/&lt;slug:slug_uuid&gt;/delete&quot;</span><span class="p">,</span> <span class="n">EditorDeleteView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;editor_delete&quot;</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Now, create an <code>article_delete.html</code> file: this will hold the form for
deleteing the article.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">form</span>
    <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span>
    <span class="na">action</span><span class="o">=</span><span class="s">&quot;{% url &#39;editor_delete&#39; slug_uuid=article.slug_uuid %}&quot;</span>
    <span class="na">style</span><span class="o">=</span><span class="s">&quot;display:inline&quot;</span>
<span class="p">&gt;</span>
    {% csrf_token %}
    <span class="p">&lt;</span><span class="nt">button</span>
        <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-outline-danger btn-sm&quot;</span>
        <span class="na">value</span><span class="o">=</span><span class="s">&quot;DELETE&quot;</span>
        <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;return confirm(&#39;Are you sure you want to delete {{ article.title }}?&#39;)&quot;</span>
    <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ion-trash-a&quot;</span><span class="p">&gt;</span>
            Delete Article
        <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Now, we want to load this template in <code>article_detail.html</code> directly,
which we achieve with an <code>include</code> tag:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span>
        <span class="na">href</span><span class="o">=</span><span class="s">&quot;{% url &#39;editor_update&#39; slug_uuid=article.slug_uuid %}&quot;</span>
        <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-outline-secondary btn-sm&quot;</span>
    <span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ion-edit&quot;</span><span class="p">&gt;</span>
            Edit Article
        <span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="hll">    {% include &#39;article_delete.html&#39; %}             <span class="cm">&lt;!-- new --&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Try deleting an article: you should get a nice confirmation message
while still on the <code>article_detail.html</code> template, before the article is
deleted.</p>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../04_slugs/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Slugs" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Slugs
            </div>
          </div>
        </a>
      
      
        
        <a href="../06_comments/" class="md-footer__link md-footer__link--next" aria-label="Next: Comments" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Comments
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/harabat/django-htmx" target="_blank" rel="noopener" title="Django + HTMX tutorial on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.expand", "navigation.top", "search.suggest"], "search": "../assets/javascripts/workers/search.85cb4492.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a877e258.min.js"></script>
      
    
  </body>
</html>