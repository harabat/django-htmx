
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A tutorial for building the RealWorld app in Django and HTMX">
      
      
      
      <link rel="icon" href="../assets/django-logo.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.8">
    
    
      
        <title>Creating, editing, and deleting Articles - Django + HTMX tutorial</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
    <script data-goatcounter="https://django-htmx.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>

    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#creating-editing-and-deleting-articles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Django + HTMX tutorial" class="md-header__button md-logo" aria-label="Django + HTMX tutorial" data-md-component="logo">
      
  <img src="../assets/django-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Django + HTMX tutorial
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Creating, editing, and deleting Articles
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/harabat/django-htmx" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  </div>
  <div class="md-source__repository">
    harabat/django-htmx
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Django + HTMX tutorial" class="md-nav__button md-logo" aria-label="Django + HTMX tutorial" data-md-component="logo">
      
  <img src="../assets/django-logo.png" alt="logo">

    </a>
    Django + HTMX tutorial
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/harabat/django-htmx" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
  </div>
  <div class="md-source__repository">
    harabat/django-htmx
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Readme
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../01_starting_the_project/" class="md-nav__link">
        Starting the project
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../02_home_page/" class="md-nav__link">
        Home page
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../03_viewing_articles/" class="md-nav__link">
        Viewing Articles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../04_slugs/" class="md-nav__link">
        Slugs
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Creating, editing, and deleting Articles
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Creating, editing, and deleting Articles
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-articles" class="md-nav__link">
    Creating articles
  </a>
  
    <nav class="md-nav" aria-label="Creating articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subclass-a-createview" class="md-nav__link">
    Subclass a CreateView
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-urlpattern" class="md-nav__link">
    Add a urlpattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-form" class="md-nav__link">
    Create a form
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-navbar-button" class="md-nav__link">
    Add a navbar button
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-form_valid" class="md-nav__link">
    Override form_valid
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#editing-articles" class="md-nav__link">
    Editing articles
  </a>
  
    <nav class="md-nav" aria-label="Editing articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subclass-an-updateview" class="md-nav__link">
    Subclass an UpdateView
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-urlpattern_1" class="md-nav__link">
    Add a urlpattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-editorhtml-template" class="md-nav__link">
    Adapt editor.html template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-an-edit-button-to-articles-pages" class="md-nav__link">
    Add an Edit button to articles' pages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-get_object_or_404-method" class="md-nav__link">
    Adapt get_object_or_404 method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-articles" class="md-nav__link">
    Deleting articles
  </a>
  
    <nav class="md-nav" aria-label="Deleting articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subclass-a-deleteview" class="md-nav__link">
    Subclass a DeleteView
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-urlpattern_2" class="md-nav__link">
    Add a urlpattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-template" class="md-nav__link">
    Create a template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-get_object_or_404-method_1" class="md-nav__link">
    Adapt get_object_or_404 method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../06_comments/" class="md-nav__link">
        Comments
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../07_users_and_profiles/" class="md-nav__link">
        Users and Profiles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../08_authentication_i_login_logout_signup/" class="md-nav__link">
        Login, Logout, Signup
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../09_authentication_ii_securing_the_app/" class="md-nav__link">
        Securing the app
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../10_profile_features/" class="md-nav__link">
        Profile features
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../11_editing_profiles/" class="md-nav__link">
        Editing profiles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../12_follows/" class="md-nav__link">
        Follows
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../13_favourites/" class="md-nav__link">
        Favourites
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../14_tags_coming_soon/" class="md-nav__link">
        Tags
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../15_htmx_coming_soon/" class="md-nav__link">
        HTMX
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../16_future_extensions/" class="md-nav__link">
        Future extensions
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-articles" class="md-nav__link">
    Creating articles
  </a>
  
    <nav class="md-nav" aria-label="Creating articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subclass-a-createview" class="md-nav__link">
    Subclass a CreateView
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-urlpattern" class="md-nav__link">
    Add a urlpattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-form" class="md-nav__link">
    Create a form
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-navbar-button" class="md-nav__link">
    Add a navbar button
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#override-form_valid" class="md-nav__link">
    Override form_valid
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#editing-articles" class="md-nav__link">
    Editing articles
  </a>
  
    <nav class="md-nav" aria-label="Editing articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subclass-an-updateview" class="md-nav__link">
    Subclass an UpdateView
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-urlpattern_1" class="md-nav__link">
    Add a urlpattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-editorhtml-template" class="md-nav__link">
    Adapt editor.html template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-an-edit-button-to-articles-pages" class="md-nav__link">
    Add an Edit button to articles' pages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-get_object_or_404-method" class="md-nav__link">
    Adapt get_object_or_404 method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-articles" class="md-nav__link">
    Deleting articles
  </a>
  
    <nav class="md-nav" aria-label="Deleting articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subclass-a-deleteview" class="md-nav__link">
    Subclass a DeleteView
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-a-urlpattern_2" class="md-nav__link">
    Add a urlpattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-template" class="md-nav__link">
    Create a template
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adapt-get_object_or_404-method_1" class="md-nav__link">
    Adapt get_object_or_404 method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/harabat/django-htmx/edit/master/docs/05_creating_editing_and_deleting_articles.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="creating-editing-and-deleting-articles">Creating, editing, and deleting Articles<a class="headerlink" href="#creating-editing-and-deleting-articles" title="Permanent link">#</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">#</a></h2>
<p>We have implemented the features that allow us to view articles, but up
to now we've been modifying them through the Django admin. We need to
let our users create, edit, and delete articles.</p>
<p>Technically, these functionalities should only be available to logged-in
users, but that's not something we can work on just yet, so we will go
ahead and implement the article features, and modify them later in order
to take into account user authentication.</p>
<h2 id="creating-articles">Creating articles<a class="headerlink" href="#creating-articles" title="Permanent link">#</a></h2>
<p>Let's allow users to create articles. The most basic feature possible.</p>
<div class="admonition advice">
<p class="admonition-title">Advice</p>
<p>We remind you again that up to now we've mostly been keeping to the</p>
</div>
<p><a href="https://github.com/DjangoGirls/tutorial">DjangoGirls tutorial</a>: if
you're having difficulties following, you should do that tutorial
instead, as its pace is a bit slower. Unless, of course, the fault is on
my side of the screen, in which case please provide feedback :).</p>
<h3 id="subclass-a-createview">Subclass a <code>CreateView</code><a class="headerlink" href="#subclass-a-createview" title="Permanent link">#</a></h3>
<p>Creating instances of a model is bound to be a common task, right?
Unsurprisingly, Django has a ready-made class-based view for that.</p>
<p>We subclass a <code>CreateView</code> in <code>articles/views.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">CreateView</span><span class="p">,</span> <span class="n">DetailView</span><span class="p">,</span> <span class="n">ListView</span>   <span class="c1"># new</span>
</span>
<span class="c1"># ...</span>

<span class="hll"><span class="k">class</span> <span class="nc">EditorCreateView</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>                                 <span class="c1"># new</span>
</span><span class="hll">    <span class="sd">&quot;&quot;&quot;View for creating articles.&quot;&quot;&quot;</span>                               <span class="c1">#</span>
</span><span class="hll">                                                                    <span class="c1">#</span>
</span><span class="hll">    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>                                                 <span class="c1">#</span>
</span><span class="hll">    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">,</span> <span class="s1">&#39;body&#39;</span><span class="p">]</span>                       <span class="c1">#</span>
</span><span class="hll">    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;editor.html&quot;</span>                                   <span class="c1">#</span>
</span></code></pre></div></td></tr></table></div>
<p>The <a href="https://docs.djangoproject.com/en/4.0/ref/class-based-views/generic-editing/#createview"><code>CreateView</code> class-based
view</a>
is a generic editing view that “displays a form for creating an object,
redisplaying the form with validation errors (if there are any) and
saving the object”. What more could we want? Sometimes, using
class-based views (and Django in general) might feel like a cheat code,
but it's completely legal, don't worry.</p>
<p>In the code above, we specify the following:</p>
<ul>
<li>the model that we're creating new instances of</li>
<li>the template name</li>
<li>the fields we want to have available to the user when creating the
    form: specifically, we're leaving out the <code>author</code> field here.</li>
</ul>
<h3 id="add-a-urlpattern">Add a <code>urlpattern</code><a class="headerlink" href="#add-a-urlpattern" title="Permanent link">#</a></h3>
<p>We add the following to <code>articles/urls.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="n">ArticleDetailView</span><span class="p">,</span> <span class="n">EditorCreateView</span><span class="p">,</span> <span class="n">Home</span>            <span class="c1"># new</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;editor&quot;</span><span class="p">,</span> <span class="n">EditorCreateView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;editor_create&quot;</span><span class="p">),</span>   <span class="c1"># new</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Not much to explain here.</p>
<h3 id="create-a-form">Create a form<a class="headerlink" href="#create-a-form" title="Permanent link">#</a></h3>
<p>This section will have lots of new elements and information, so take a
break.</p>
<p>We need to create the template <code>templates/editor.html</code> (based on Svelte
implementation's
<a href="https://github.com/sveltejs/realworld/blob/master/src/routes/editor/_Editor.svelte">_Editor.svelte</a>
template):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code>{% extends &#39;base.html&#39; %}
{% block title %}
  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Editor - Conduit: Django + HTMX<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
{% endblock %}
{% block content %}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;editor-page&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container page&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;col-md-10 offset-md-1 col-xs-12&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&quot;post&quot;</span><span class="p">&gt;</span>
            {% csrf_token %}
            <span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
              {{ form.non_field_errors }}
              <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span>
                  <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control form-control-lg&quot;</span>
                  <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
                  <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Article Title&quot;</span>
                  <span class="na">name</span><span class="o">=</span><span class="s">&quot;{{ form.title.name }}&quot;</span>
                <span class="p">/&gt;</span>
              <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
              {{ form.title.errors }}
              <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">input</span>
                  <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span>
                  <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
                  <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;What&#39;s this article about?&quot;</span>
                  <span class="na">name</span><span class="o">=</span><span class="s">&quot;{{ form.description.name }}&quot;</span>
                <span class="p">/&gt;</span>
              <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
              {{ form.description.errors }}
              <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">textarea</span>
                  <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span>
                  <span class="na">rows</span><span class="o">=</span><span class="s">&quot;8&quot;</span>
                  <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Write your article (in markdown)&quot;</span>
                  <span class="na">name</span><span class="o">=</span><span class="s">&quot;{{ form.body.name }}&quot;</span>
                <span class="p">&gt;&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>
              <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
              {{ form.body.errors }}
              <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-lg pull-xs-right btn-primary&quot;</span><span class="p">&gt;</span>
                Publish Article
              <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
          <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{% endblock %}
</code></pre></div></td></tr></table></div>
<p>There's a lot here: we've reached the point where we have to implement
forms, a major use case in web dev. While forms are one of Django's many
strong points, there is a lot of new material to understand.</p>
<p>The <a href="https://docs.djangoproject.com/en/4.0/topics/forms/">Django docs section that deals with
forms</a> says:</p>
<blockquote>
<p>Django handles three distinct parts of the work involved in forms:</p>
<ul>
<li>preparing and restructuring data to make it ready for rendering</li>
<li>creating HTML forms for the data</li>
<li>receiving and processing submitted forms and data from the client</li>
</ul>
</blockquote>
<p>Forms allow users to provide input to the website they're visiting, that
the website can then process and act upon.</p>
<p>We want to modify data server-side (we will create new <code>Article</code>
instances), so we need to make a POST form (which we do with
<code>method="post"</code>).</p>
<p>POST forms need to mitigate against <a href="https://docs.djangoproject.com/en/4.0/ref/csrf/">Cross Site Request
Forgeries</a>, a type of
malicious attack, but Django makes this very easy: in our case, we only
need to include the <code>{% csrf_token %}</code> tag inside the <code>&lt;form&gt;</code> element
(though you might have to do a bit more work <a href="https://docs.djangoproject.com/en/4.0/howto/csrf/using-csrf">in other
circumstances</a>).</p>
<p>There are different ways to render a form: it depends on whether
<a href="https://docs.djangoproject.com/en/4.0/topics/forms/#form-rendering-options">Django's defaults unpacking of form
fields</a>
is sufficient, or whether you need more <a href="https://docs.djangoproject.com/en/4.0/topics/forms/#rendering-fields-manually">flexibility in how you render
the
fields</a>.
In our case, we want a lot of flexibility: we want the fields to be in a
specific order, to have distinct placeholder values, to have different
CSS styling, etc., so we'll render them manually.</p>
<p>Because we chose to render form fields manually, we also have to <a href="https://docs.djangoproject.com/en/4.0/topics/forms/#rendering-form-error-messages">render
form errors
manually</a>.
The <code>{{ form.non_field_errors }}</code> variable will display any errors that
are not field-specific, which is why this variable is outside of any
fieldsets. The <code>{{ form.field_name.errors }}</code> variables, located in the
relevant fieldset tag, will display field-specific errors.</p>
<h3 id="add-a-navbar-button">Add a navbar button<a class="headerlink" href="#add-a-navbar-button" title="Permanent link">#</a></h3>
<p>We add a <code>New article</code> button to the Nav bar in <code>templates/nav.html</code>
(still copying Svelte's <a href="https://github.com/sveltejs/realworld/blob/master/src/lib/Nav.svelte">Nav.svelte
template</a>):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cm">&lt;!-- ... --&gt;</span>
<span class="p">&lt;</span><span class="nt">ul</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav navbar-nav pull-xs-right&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-item&quot;</span><span class="p">&gt;</span>
<span class="hll">    {% url &#39;home&#39; as home %}                                                        <span class="cm">&lt;!-- new --&gt;</span>
</span><span class="hll">    <span class="cm">&lt;!-- &lt;a href=&quot;{% url &#39;home&#39; %}&quot; rel=&quot;prefetch&quot; class=&quot;nav-link&quot;&gt; --&gt;</span>            <span class="cm">&lt;!-- from this --&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">a</span>                                                                              <span class="err">&lt;!</span><span class="na">--</span> <span class="na">to</span> <span class="na">this</span> <span class="na">--</span><span class="p">&gt;</span>
</span><span class="hll">      href=&quot;{{ home }}&quot;                                                             <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      rel=&quot;prefetch&quot;                                                                <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      class=&quot;nav-link {% if request.path == home %}active{% endif %}&quot;               <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    &gt;                                                                               <span class="cm">&lt;!-- # --&gt;</span>
</span>      Home
    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;</span><span class="nt">li</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;nav-item&quot;</span><span class="p">&gt;</span>                                                             <span class="cm">&lt;!-- new --&gt;</span>
</span><span class="hll">    {% url &#39;editor_create&#39; as editor_create %}                                      <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">a</span>                                                                              <span class="err">&lt;!</span><span class="na">--</span> <span class="err">#</span> <span class="na">--</span><span class="p">&gt;</span>
</span><span class="hll">      href=&quot;{{ editor_create }}&quot;                                                    <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      rel=&quot;prefetch&quot;                                                                <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      class=&quot;nav-link {% if request.path == editor_create %}active{% endif %}&quot;      <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    &gt;                                                                               <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ion-compose&quot;</span><span class="p">&gt;</span>                                                    <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">        New Post                                                                    <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>                                                                       <span class="cm">&lt;!-- # --&gt;</span>
</span>    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>                                                                            <span class="cm">&lt;!-- # --&gt;</span>
  <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>                                                                             <span class="cm">&lt;!-- # --&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>Now that we have 2 links in our navbar, we want to better style active
links: we add <code>{% url 'home' as home %}</code> and
<code>class "nav-link {% if request.path == home %}active{% endif %}"</code>.</p>
<h3 id="override-form_valid">Override <code>form_valid</code><a class="headerlink" href="#override-form_valid" title="Permanent link">#</a></h3>
<p>Try to create an article in your app. When you hit “Publish”, you'll get
an error:</p>
<blockquote>
<p>IntegrityError at /editor NOT NULL constraint failed:
articles_article.author_id</p>
</blockquote>
<p>This means that the issue is that the <code>author</code> value for the <code>Article</code>
instance we're trying to create is <code>NULL</code>, which it shouldn't be. What
we need to do in order to solve this issue is to somehow tell Django
that the author is whoever's sending the request for creating the
article: even though we haven't yet implemented authentication, we do
have a user</p>
<p>The docs tell us that, when we want to track the user that created an
object with a <code>CreateView</code>, we need to override the view's <a href="https://docs.djangoproject.com/en/4.0/ref/class-based-views/mixins-editing/#django.views.generic.edit.ModelFormMixin.form_valid"><code>form_valid</code>
method</a>,
which is called when some valid form data is POSTed.</p>
<p>In <code>articles/views.py</code>, we override the <code>form_valid</code> method of our
<code>EditorCreateView</code>, following the example given in the docs:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="k">class</span> <span class="nc">EditorCreateView</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;create article&quot;&quot;&quot;</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">]</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;editor.html&quot;</span>

<span class="hll">    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>                         <span class="c1"># new</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">profile</span>  <span class="c1">#</span>
</span><span class="hll">        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>                 <span class="c1">#</span>
</span></code></pre></div></td></tr></table></div>
<p>Should work now, right? As expected, when we try to create an article
again, we get an… error again?</p>
<blockquote>
<p>AttributeError at /editor ‘NoneType’ object has no attribute ‘author’</p>
</blockquote>
<p>If we read our code again, we can pinpoint the issue to the fact that
<code>self.object</code> does not exist. We need to create the object first.</p>
<p>Solving this requires understanding a bit more about forms. Behind the
scenes, when we subclass a <code>CreateView</code> because we want to create new
instances of a specific model, the forms that we're working with when
creating new model instances are <a href="https://docs.djangoproject.com/en/4.0/topics/forms/modelforms/"><code>ModelForm</code>
objects</a>,
which map a model class's fields to HTML form <code>&lt;input&gt;</code> elements.</p>
<p>The <code>ModelForm</code> class has a <a href="https://docs.djangoproject.com/en/4.0/topics/forms/modelforms/#the-save-method"><code>save</code>
method</a>
which “creates and saves a database object from the data bound to the
form”. What we want to do is get that data, append a new field, then
save the resulting object to the database. Well, we're in luck: /“If you
call save() with commit=False, then it will return an object that hasn’t
yet been saved to the database. […] This is useful if you want to do
custom processing on the object before saving it”/.</p>
<p>Let's try to take into account this new piece of knowledge:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="k">class</span> <span class="nc">EditorCreateView</span><span class="p">(</span><span class="n">CreateView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;create article&quot;&quot;&quot;</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">]</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;editor.html&quot;</span>

<span class="hll">    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>           <span class="c1"># new</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">profile</span>
</span><span class="hll">        <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>                              <span class="c1"># new</span>
</span><span class="hll">        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
</span></code></pre></div></td></tr></table></div>
<p>The code above does the following:</p>
<ul>
<li>get the object from the data POSTed by the form</li>
<li>set the logged in <code>profile</code> (which will always be <code>admin</code>, for now)
    as the <code>author</code></li>
<li>save the new object.</li>
</ul>
<p>Try creating another article once you have added the code above to your
view: a new article will be created and you will be redirected to its
page.</p>
<p>Be aware however that you need to be logged in as admin for it to work,
otherwise you'll get another error.</p>
<h2 id="editing-articles">Editing articles<a class="headerlink" href="#editing-articles" title="Permanent link">#</a></h2>
<p>We will now implement the editing feature.</p>
<h3 id="subclass-an-updateview">Subclass an <code>UpdateView</code><a class="headerlink" href="#subclass-an-updateview" title="Permanent link">#</a></h3>
<p>You won't be surprised by now if we say that Django comes with a
ready-made view for editing objects: the <a href="https://docs.djangoproject.com/en/4.0/ref/class-based-views/generic-editing/#updateview"><code>UpdateView</code> class-based
view</a>.</p>
<p>In <code>articles/views.py</code>, add the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="hll"><span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">CreateView</span><span class="p">,</span> <span class="n">DetailView</span><span class="p">,</span> <span class="n">ListView</span><span class="p">,</span> <span class="n">UpdateView</span>
</span>
<span class="c1"># ...</span>

<span class="hll"><span class="k">class</span> <span class="nc">EditorUpdateView</span><span class="p">(</span><span class="n">UpdateView</span><span class="p">):</span>
</span><span class="hll">    <span class="sd">&quot;&quot;&quot;View for editing articles.&quot;&quot;&quot;</span>
</span><span class="hll">
</span><span class="hll">    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>
</span><span class="hll">    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">]</span>
</span><span class="hll">    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;editor.html&quot;</span>
</span></code></pre></div></td></tr></table></div>
<p>Nothing new here: we're going to be editing the <code>Article</code> model on the
fields that we expose when creating new articles, and we'll use the same
template for creating and editing articles.</p>
<h3 id="add-a-urlpattern_1">Add a <code>urlpattern</code><a class="headerlink" href="#add-a-urlpattern_1" title="Permanent link">#</a></h3>
<p>In <code>articles/urls.py</code>, add:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="c1"># ...</span>
    <span class="n">EditorUpdateView</span>
<span class="p">)</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
    <span class="n">path</span><span class="p">(</span><span class="s2">&quot;editor/&lt;slug:slug_uuid&gt;&quot;</span><span class="p">,</span> <span class="n">EditorUpdateView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;editor_update&quot;</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Again, nothing new.</p>
<h3 id="adapt-editorhtml-template">Adapt <code>editor.html</code> template<a class="headerlink" href="#adapt-editorhtml-template" title="Permanent link">#</a></h3>
<p>Now we need to adapt our existing <code>templates/editor.html</code> template for
cases where we're updating, rather than creating, articles.</p>
<p>In practice, this doesn't demand a lot of changes: we're still working
on the same model, exposing the same fields, at the same URL.</p>
<p>The only thing that changes is that we want to have the form fields
empty when the object doesn't exist yet (ie we're creating an article),
and we want these fields prepopulated with the relevant values if the
object exists already (ie we're updating).</p>
<p>Let's add the following to <code>templates/editor.html</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cm">&lt;!-- ... --&gt;</span>
<span class="p">&lt;</span><span class="nt">fieldset</span><span class="p">&gt;</span>
  {{ form.non_field_errors }}
  <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span>
      <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control form-control-lg&quot;</span>
      <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
      <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Article Title&quot;</span>
      <span class="na">name</span><span class="o">=</span><span class="s">&quot;{{ form.title.name }}&quot;</span>
<span class="hll">      <span class="na">value</span><span class="o">=</span><span class="s">&quot;{{ form.title.value|default_if_none:&#39;&#39; }}&quot;</span>            <span class="err">&lt;!</span><span class="na">--</span> <span class="na">new</span> <span class="na">--</span><span class="p">&gt;</span>
</span>    /&gt;
  <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
  {{ form.title.errors }}
  <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span>
      <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span>
      <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span>
      <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;What&#39;s this article about?&quot;</span>
      <span class="na">name</span><span class="o">=</span><span class="s">&quot;{{ form.description.name }}&quot;</span>
<span class="hll">      <span class="na">value</span><span class="o">=</span><span class="s">&quot;{{ form.description.value|default_if_none:&#39;&#39; }}&quot;</span>      <span class="err">&lt;!</span><span class="na">--</span> <span class="na">new</span> <span class="na">--</span><span class="p">&gt;</span>
</span>    /&gt;
  <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
  {{ form.description.errors }}
  <span class="p">&lt;</span><span class="nt">fieldset</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-group&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">textarea</span>
      <span class="na">class</span><span class="o">=</span><span class="s">&quot;form-control&quot;</span>
      <span class="na">rows</span><span class="o">=</span><span class="s">&quot;8&quot;</span>
      <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Write your article (in markdown)&quot;</span>
      <span class="na">name</span><span class="o">=</span><span class="s">&quot;{{ form.body.name }}&quot;</span>
<span class="hll">    <span class="p">&gt;</span>{{ form.body.value|default_if_none:&#39;&#39; }}<span class="p">&lt;/</span><span class="nt">textarea</span><span class="p">&gt;</span>           <span class="cm">&lt;!-- new --&gt;</span>
</span>  <span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
  {{ form.body.errors }}
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-lg pull-xs-right btn-primary&quot;</span><span class="p">&gt;</span>
    Publish Article
  <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">fieldset</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- ... --&gt;</span>
</code></pre></div></td></tr></table></div>
<p>We are accessing the relevant values for our fields through
<code>form.field_name.value</code>. However, when using <code>UpdateView</code>, we have
access to the object being updated, so we have access to the relevant
values through the <code>context_object_name</code> <code>article</code>, so you could write
<code>article.title</code> instead of <code>form.title.value</code>, etc., if you prefer this
alternative.</p>
<p>We're using a <a href="https://docs.djangoproject.com/en/4.0/ref/templates/builtins/#default-if-none"><code>default_if_none</code> template
filter</a>
here: this filter provides a default value if the value of the preceding
variable is <code>None</code>. If our article exists, it will have a title,
description, and body, and the values of those fields will be presented
in the form fields. If the article doesn't exist, we will just get the
empty strings we defined as default.</p>
<h3 id="add-an-edit-button-to-articles-pages">Add an <em>Edit</em> button to articles' pages<a class="headerlink" href="#add-an-edit-button-to-articles-pages" title="Permanent link">#</a></h3>
<p>We want to expose our new editing functionality in our templates.</p>
<p>We will add a button for editing the article in
<code>templates/article_meta.html</code>, based on the Svelte implementation's
[[<a href="https://github.com/sveltejs/realworld/blob/master/src/routes/article/\%5Bslug\%5D/_ArticleMeta.svelte">https://github.com/sveltejs/realworld/blob/master/src/routes/article/\[slug\]/_ArticleMeta.svelte</a>][_ArticleMeta.svelte]]:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;article-meta&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;info&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;author&quot;</span><span class="p">&gt;</span>
      {{ article.author.user.username }}
    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;date&quot;</span><span class="p">&gt;</span>
      {{ article.created_at|date:&quot;D M d Y&quot; }}
    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="hll">  <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>                                                            <span class="cm">&lt;!-- new --&gt;</span>
</span><span class="hll">    <span class="p">&lt;</span><span class="nt">a</span>                                                              <span class="err">&lt;!</span><span class="na">--</span> <span class="err">#</span> <span class="na">--</span><span class="p">&gt;</span>
</span><span class="hll">      href=&quot;{% url &#39;editor_update&#39; slug_uuid=article.slug_uuid %}&quot;  <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      class=&quot;btn btn-outline-secondary btn-sm&quot;                      <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    &gt;                                                               <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ion-edit&quot;</span><span class="p">&gt;</span>                                       <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">        Edit Article                                                <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">      <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>                                                       <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>                                                            <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="hll">  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>                                                           <span class="cm">&lt;!-- # --&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>This is the first time that we pass parameters to a URL in a Django
template.</p>
<p>We only just added a <code>urlpattern</code> to <code>articles/urls.py</code>, and we know
that it takes a <code>slug_uuid</code> as a parameter, so we pass
<code>article.slug_uuid</code> as an argument to our URL, as explained in the docs
for the <a href="https://docs.djangoproject.com/en/4.0/ref/templates/builtins/#url"><code>url</code>
tag</a>.</p>
<h3 id="adapt-get_object_or_404-method">Adapt <code>get_object_or_404</code> method<a class="headerlink" href="#adapt-get_object_or_404-method" title="Permanent link">#</a></h3>
<p>Try navigating to an article: you should be able to view the <em>Edit</em>
button. But try editing the thing and you'll just get an error:</p>
<blockquote>
<p>AttributeError at
/editor/createview-50952832-f5b4-4f93-9edc-33aaa5f73565</p>
<p>Generic detail view EditorUpdateView must be called with either an
object pk or a slug in the URLconf.</p>
<p>Request Method: GET Request URL:
<a href="http://127.0.0.1:8000/editor/createview-50952832-f5b4-4f93-9edc-33aaa5f73565">http://127.0.0.1:8000/editor/createview-50952832-f5b4-4f93-9edc-33aaa5f73565</a></p>
</blockquote>
<p>Well well well, pretty sure we have seen an error just like this before…
The <code>UpdateView</code> must be called with an object <code>pk</code> or a <code>slug</code>, but we
have this <code>slug_uuid</code> field instead.</p>
<p>Since we've seen and solved this error when we were implementing
<code>ArticleDetailView</code>, let's just go back and add the same code to
<code>EditorUpdateView</code> in <code>articles/views.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="k">class</span> <span class="nc">EditorUpdateView</span><span class="p">(</span><span class="n">UpdateView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;View for editing articles.&quot;&quot;&quot;</span>

    <span class="c1"># ...</span>

<span class="hll">    <span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                                       <span class="c1"># new</span>
</span><span class="hll">        <span class="n">slug_uuid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;slug_uuid&quot;</span><span class="p">)</span>                <span class="c1">#</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Article</span><span class="p">,</span> <span class="n">slug_uuid</span><span class="o">=</span><span class="n">slug_uuid</span><span class="p">)</span>  <span class="c1">#</span>
</span></code></pre></div></td></tr></table></div>
<p>We're just teaching our <code>EditorUpdateView</code> to retrieve the right
<code>Article</code> instance based on a <code>slug_uuid</code> value.</p>
<p>Try editing an article now: you get a nice form with prepopulated
fields, and can even save any changes!</p>
<h2 id="deleting-articles">Deleting articles<a class="headerlink" href="#deleting-articles" title="Permanent link">#</a></h2>
<p>Our users can now create and edit articles: the only missing
functionality is article deletion. Let's get to it.</p>
<h3 id="subclass-a-deleteview">Subclass a <code>DeleteView</code><a class="headerlink" href="#subclass-a-deleteview" title="Permanent link">#</a></h3>
<p>In <code>views.py</code>, we create a <code>ArticleDeleteView</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="c1"># ...</span>
<span class="hll">    <span class="n">DeleteView</span><span class="p">,</span>                                 <span class="c1"># new</span>
</span><span class="p">)</span>

<span class="c1"># ...</span>
<span class="k">class</span> <span class="nc">EditorDeleteView</span><span class="p">(</span><span class="n">DeleteView</span><span class="p">):</span>             <span class="c1"># new</span>
    <span class="sd">&quot;&quot;&quot;View for deleting articles.&quot;&quot;&quot;</span>           <span class="c1">#</span>
                                                <span class="c1">#</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">Article</span>                             <span class="c1">#</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;article_detail.html&quot;</span>       <span class="c1">#</span>
    <span class="n">success_url</span> <span class="o">=</span> <span class="n">reverse_lazy</span><span class="p">(</span><span class="s2">&quot;home&quot;</span><span class="p">)</span>          <span class="c1">#</span>
</code></pre></div></td></tr></table></div>
<p>The <code>DeleteView</code> generic class-based view allows to delete an existing
object.</p>
<p>The user will delete an article from the article's page, so that page
will also be removed, and the user needs to be redirected to another URL
after deletion: we will redirect the user to the <code>home</code> URL with
<a href="https://docs.djangoproject.com/en/4.0/ref/urlresolvers/#reverse-lazy"><code>reverse_lazy</code> URL
resolver</a>,
which we need to use instead of <code>reverse</code> in class-based views.</p>
<p>In a second, we'll explain why we're using
<code>templates/article_detail.html</code> as the template for this view, and why
it's interesting.</p>
<h3 id="add-a-urlpattern_2">Add a <code>urlpattern</code><a class="headerlink" href="#add-a-urlpattern_2" title="Permanent link">#</a></h3>
<p>First, let's create a <code>urlpattern</code> in <code>articles/urls.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="kn">from</span> <span class="nn">.views</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="c1"># ...</span>
<span class="hll">    <span class="n">EditorDeleteView</span><span class="p">,</span>                           <span class="c1"># new</span>
</span><span class="p">)</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ...</span>
<span class="hll">    <span class="n">path</span><span class="p">(</span>                                       <span class="c1"># new</span>
</span><span class="hll">        <span class="s2">&quot;editor/&lt;slug:slug_uuid&gt;/delete&quot;</span><span class="p">,</span>       <span class="c1">#</span>
</span><span class="hll">        <span class="n">EditorDeleteView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(),</span>             <span class="c1">#</span>
</span><span class="hll">        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;editor_delete&quot;</span><span class="p">,</span>                   <span class="c1">#</span>
</span><span class="hll">    <span class="p">),</span>                                          <span class="c1">#</span>
</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<h3 id="create-a-template">Create a template<a class="headerlink" href="#create-a-template" title="Permanent link">#</a></h3>
<p>The common way to implement a <code>DeleteView</code> is to have a GET form on some
page (for example, the article's detail page) that redirects to a
confirmation page with a POST form that will delete the object. GET
forms are used to construct a URL based on the data from the form: a
good example are search forms, which take the data (a query, like
“form”) and send it to a URL (like
“<a href="https://docs.djangoproject.com/search/?q=forms&amp;release=1">https://docs.djangoproject.com/search/?q=forms&amp;release=1</a>”). POST
forms, which we've covered before, are used to modify data server-side.</p>
<p>But that's not the workflow we want in the Realworld app: we should be
able to delete an article straight from its detail page, which is why we
specified <code>article_detail.html</code> template as our <code>template_name</code>.
Implementing this will require some complicated code (relative to what
we've written before), but we'll go through it slowly.</p>
<p>First, we'll create <code>templates/article_delete.html</code>: this will hold the
form for deleting the article.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">&lt;</span><span class="nt">form</span>
    <span class="na">method</span><span class="o">=</span><span class="s">&quot;POST&quot;</span>
    <span class="na">action</span><span class="o">=</span><span class="s">&quot;{% url &#39;editor_delete&#39; slug_uuid=article.slug_uuid %}&quot;</span>
    <span class="na">style</span><span class="o">=</span><span class="s">&quot;display:inline&quot;</span>
<span class="p">&gt;</span>
  {% csrf_token %}
  <span class="p">&lt;</span><span class="nt">button</span>
      <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-outline-danger btn-sm&quot;</span>
      <span class="na">value</span><span class="o">=</span><span class="s">&quot;DELETE&quot;</span>
      <span class="na">onclick</span><span class="o">=</span><span class="s">&quot;return confirm(&#39;Are you sure you want to delete {{ article.title }}?&#39;)&quot;</span>
  <span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ion-trash-a&quot;</span><span class="p">&gt;</span>
      Delete Article
    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div></td></tr></table></div>
<p>This is our POST form, the form that will delete the object identified
by the parameter <code>slug_uuid</code> we're passing to the <code>editor_delete</code> URL.
Since this is a POST form, it requires a <code>csrf_token</code> tag.</p>
<p>Now, we want to load this template in <code>article_meta.html</code> directly,
alongside the <em>Edit</em> button. We'll do this with an <code>include</code> tag:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cm">&lt;!-- ... --&gt;</span>
<span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span>
    <span class="na">href</span><span class="o">=</span><span class="s">&quot;{% url &#39;editor_update&#39; slug_uuid=article.slug_uuid %}&quot;</span>
    <span class="na">class</span><span class="o">=</span><span class="s">&quot;btn btn-outline-secondary btn-sm&quot;</span>
  <span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;ion-edit&quot;</span><span class="p">&gt;</span>
      Edit Article
    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="hll">  {% include &#39;article_delete.html&#39; %}               <span class="cm">&lt;!-- new --&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<span class="cm">&lt;!-- ... --&gt;</span>
</code></pre></div></td></tr></table></div>
<h3 id="adapt-get_object_or_404-method_1">Adapt <code>get_object_or_404</code> method<a class="headerlink" href="#adapt-get_object_or_404-method_1" title="Permanent link">#</a></h3>
<p>Before we try deleting an article, we remember that we need to teach our
<code>ArticleDeleteView</code> to identify articles by their <code>slug_uuid</code>.</p>
<p>In <code>articles/views.py</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># ...</span>
<span class="k">class</span> <span class="nc">EditorDeleteView</span><span class="p">(</span><span class="n">DeleteView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;View for deleting articles.&quot;&quot;&quot;</span>

    <span class="c1"># ...</span>

<span class="hll">    <span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>                                       <span class="c1"># new</span>
</span><span class="hll">        <span class="n">slug_uuid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;slug_uuid&quot;</span><span class="p">)</span>                <span class="c1">#</span>
</span><span class="hll">        <span class="k">return</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Article</span><span class="p">,</span> <span class="n">slug_uuid</span><span class="o">=</span><span class="n">slug_uuid</span><span class="p">)</span>  <span class="c1">#</span>
</span></code></pre></div></td></tr></table></div>
<p>Try deleting an article: you should get a nice confirmation message
while still on the <code>article_detail.html</code> template, before the article is
deleted.</p>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../04_slugs/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Slugs" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Slugs
            </div>
          </div>
        </a>
      
      
        
        <a href="../06_comments/" class="md-footer__link md-footer__link--next" aria-label="Next: Comments" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Comments
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/harabat/django-htmx" target="_blank" rel="noopener" title="Django + HTMX tutorial on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.expand", "navigation.top", "search.suggest"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.0238f547.min.js"></script>
      
    
  </body>
</html>